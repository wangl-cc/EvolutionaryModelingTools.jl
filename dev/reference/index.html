<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>References · EvolutionaryModelingTools.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">EvolutionaryModelingTools.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../example/">Examples</a></li><li class="is-active"><a class="tocitem" href>References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>References</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>References</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/wangl-cc/EvolutionaryModelingTools.jl/blob/master/docs/src/reference.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="EvolutionaryModelingTools.Reaction" href="#EvolutionaryModelingTools.Reaction"><code>EvolutionaryModelingTools.Reaction</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Reaction{C,U}</code></pre><p>Contain a &quot;calculate&quot; function and an &quot;update&quot; function. The &quot;calculate&quot; function calculates the a &quot;rate&quot; of reaction with the system state, which determines the probability weight of the reaction be selected, and the &quot;update&quot; function updates the system state, when this reaction were selected randomly.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wangl-cc/EvolutionaryModelingTools.jl/blob/ea7d8f4018e939ac5ace658b7afc578f422b9501/src/model.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="EvolutionaryModelingTools.@cfunc" href="#EvolutionaryModelingTools.@cfunc"><code>EvolutionaryModelingTools.@cfunc</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@cfunc ex</code></pre><p>Define a &quot;calculation&quot; function with an &quot;adapter&quot; methods used to parse args from model. &quot;calculate&quot; functions take arguments from system state and calculate &quot;rate&quot;s determining the probability weight of the reaction be selected.</p><p><strong>Example</strong></p><p>For function definition:</p><pre><code class="language-julia hljs">@cfunc @inline growth_c(r, x::Vector) = r * x # function to calculate &quot;growth rate&quot;</code></pre><p>This macro creates two methods, an &quot;adapter&quot; method</p><pre><code class="language-julia hljs">growth_c(args::NamedTuple) = growth_c(args.r, args.x)</code></pre><p>and the origin method</p><pre><code class="language-julia hljs">@inline growth_c(r, x::Vector) = r * x</code></pre><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>For function definition with other macros, put those macros after this macro.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The argument name <code>t</code> is reserved for time. Don&#39;t use those variable names for other usage</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wangl-cc/EvolutionaryModelingTools.jl/blob/ea7d8f4018e939ac5ace658b7afc578f422b9501/src/tools.jl#L3-L31">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="EvolutionaryModelingTools.@ufunc" href="#EvolutionaryModelingTools.@ufunc"><code>EvolutionaryModelingTools.@ufunc</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@ufunc ex</code></pre><p>Define a &quot;update&quot; function with an &quot;adapter&quot; methods used to parse args from model. &quot;update&quot; functions take arguments from system state and update system state.</p><p><strong>Example</strong></p><p>For function definition:</p><pre><code class="language-julia hljs">@ufunc Base.@propagate_inbounds growth_u!(ind::CartesianIndex{1}, x) = x[ind] += 1</code></pre><p>This macro creates two methods, an &quot;adapter&quot; method</p><pre><code class="language-julia hljs">growth_u!(ind, args::NamedTuple) = growth_u(ind, args.x)</code></pre><p>and the origin method</p><pre><code class="language-julia hljs">Base.@propagate_inbounds growth_u!(ind::CartesianIndex{1}, x) = x[ind] += 1</code></pre><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>For function definition with other macros, put those macros after this macro.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The argument name <code>t</code> is reserved for time, arguments name <code>rng</code> is reserved for random number generator, and the argument name <code>ind</code> is preserved for index of &quot;reaction&quot;. Don&#39;t use those variable names for other usage</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wangl-cc/EvolutionaryModelingTools.jl/blob/ea7d8f4018e939ac5ace658b7afc578f422b9501/src/tools.jl#L38-L67">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="EvolutionaryModelingTools.@reaction" href="#EvolutionaryModelingTools.@reaction"><code>EvolutionaryModelingTools.@reaction</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@reaction name ex</code></pre><p>Define a <a href="#EvolutionaryModelingTools.Reaction"><code>Reaction</code></a> with the given <code>name</code> and <code>ex</code>.</p><pre><code class="language-julia hljs">@reaction growth begin
    r * x # &quot;calculate&quot; expression
    begin
        i = ind[1]
        x[i] += 1 # &quot;update&quot; expression
    end
end</code></pre><p>will create a <code>Reaction</code> with a &quot;calculation&quot; function:</p><pre><code class="language-julia hljs">@cfunc Base.@propagate_inbounds growth_c(r, x) = r * x</code></pre><p>and an &quot;update&quot; function:</p><pre><code class="language-julia hljs">@ufunc Base.@propagate_inbounds growth_u!(ind, x) = begin
    i = ind[1]
    x[i] += 1
end</code></pre><p>where arguments of functions were collected from given expression automatically.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If there are global variables, this macro may can not collect arguments correctly Especially, for functions which accept function and types as arguments, those functions and types may also be collect as an arguments. Thus, these variables must be marked as global variables by <code>global</code> before use them, even functions and types. Besides, type annotation expressions like <code>x::Vector{Int}</code>, types <code>Vector</code> and <code>Int</code> will not be collected. Avoid to defined your reaction with a type arguments for type annotation.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The expression follow the same name preserve rule as <code>@cfunc</code> and <code>@ufunc</code>, don&#39;t use those variable names for other usage.</p></div></div><p>This macro cannot parse macro expression. Thus in some cases, arguments of expression with macro may not be collected correctly. To avoid this, define reaction with anonymous functions may helpfully:</p><pre><code class="nohighlight hljs">@reaction reaction begin
    (A, B) -&gt; @einsum C[i, k] := A[i, j] * B[j, k] # where C, i, j, k should not be collected
    begin
        # do something
    end
end</code></pre><p>in this case, only arguments of anonymous function (<code>c</code>, <code>A</code> and <code>B</code>) will be collected.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wangl-cc/EvolutionaryModelingTools.jl/blob/ea7d8f4018e939ac5ace658b7afc578f422b9501/src/tools.jl#L75-L128">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="EvolutionaryModelingTools.gillespie" href="#EvolutionaryModelingTools.gillespie"><code>EvolutionaryModelingTools.gillespie</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">gillespie([hook!, rng::AbstractRNG,] c, ps::NamedTuple, rs::Tuple)</code></pre><p>Simulate the system using the Gillespie algorithm with the given parameters, and return a tuple of updated <code>ps</code>, end time and terminate state. More about terminate state, see <a href="#EvolutionaryModelingTools.gillespie!"><code>gillespie!</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>hook!</code>: a function with similar arguments to &quot;update&quot; functions  and recommended to created with <a href="#EvolutionaryModelingTools.@ufunc"><code>@ufunc</code></a> macro;  unlike &quot;update&quot; functions, <code>hook</code> will be called after each reaction  and should return a terminate state used to terminate the simulation if it is not <code>:finnish</code>.</li><li><code>rng</code>: a random number generator for generate random numbers;</li><li><code>c</code>: a <code>ContinuousClock</code>, a end time or a tuple of a begin and a end time;</li><li><code>ps</code>: a NamedTuple contains state, parameters even args used by <code>hook!</code> of the system;</li><li><code>rs</code>: a tuple contains reactions, all parameters required by reactions must be in <code>ps</code> with same name.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wangl-cc/EvolutionaryModelingTools.jl/blob/ea7d8f4018e939ac5ace658b7afc578f422b9501/src/model.jl#L118-L135">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="EvolutionaryModelingTools.gillespie!" href="#EvolutionaryModelingTools.gillespie!"><code>EvolutionaryModelingTools.gillespie!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">gillespie!(hook!, rng::AbstractRNG, c::ContinuousClock, ps::NamedTuple, rs::Tuple)</code></pre><p>Simulate the system using the Gillespie algorithm with the given parameters, and return a tuple of end time and the terminate state <code>:finnish</code>, <code>:zero</code> or any other state returns by the <code>hook!</code>. The terminate state <code>:finnish</code> means that simulation reach to the end time, and <code>:zero</code> means the simulation break because the total &quot;reaction rate&quot; is zero, besides, <code>hook!</code> should return a symbol terminate state like <code>:break</code>. if the return value of <code>hook!</code> is not <code>:finnish</code>, the simulation will be terminated. The clock <code>c</code> and parameters <code>ps</code> will be updated during the simulation.</p><p><strong>Arguments</strong></p><ul><li><code>hook!</code>: a function with similar arguments to &quot;update&quot; functions,  and it&#39;s recommended to create <code>hook!</code> with <a href="#EvolutionaryModelingTools.@ufunc"><code>@ufunc</code></a> macro;  unlike &quot;update&quot; functions, <code>hook</code> will be called after each reaction  and should return a terminate state used to terminate the simulation if it is not <code>:finnish</code>.</li><li><code>rng</code>: a random number generator for generate random numbers;</li><li><code>c</code>: a clock recording time, which must be the reference clock of recorded variables in <code>ps</code>;</li><li><code>ps</code>: a NamedTuple contains state, parameters even args used by <code>hook!</code> of the system;</li><li><code>rs</code>: a tuple contains reactions, all parameters required by reactions must be in <code>ps</code> with same name.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/wangl-cc/EvolutionaryModelingTools.jl/blob/ea7d8f4018e939ac5ace658b7afc578f422b9501/src/model.jl#L72-L94">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../example/">« Examples</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Friday 17 December 2021 07:31">Friday 17 December 2021</span>. Using Julia version 1.7.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
